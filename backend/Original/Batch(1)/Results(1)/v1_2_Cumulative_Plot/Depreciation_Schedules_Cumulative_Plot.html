
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Financial Analysis - Depreciation Schedules</title>
            <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
            <style>
            .plot-container {
    width: 50%;
    margin: 0 auto;
}
.button-grid {
    width: 50%;
    display: flex;
    justify-content: space-between;
    gap: 15px;
    margin: 15px auto;
    padding: 0 5px;
}
.button-grid button {
    flex: 1;
    padding: 8px 12px;
    font-size: 14px;
    white-space: nowrap;
    border: none;
    border-radius: 4px;
    background-color: #f8f9fa;
    color: #495057;
    transition: all 0.2s ease-in-out;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    cursor: pointer;
}
.button-grid button:hover {
    background-color: #e9ecef;
    transform: translateY(-1px);
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.button-grid button:active {
    transform: translateY(1px);
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}
.button-grid button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}
#plot {
    width: 100%;
    height: 500px;
}
            </style>
        </head>
        <body>
        <div class="plot-container">
            <div id="plot"></div>
            <div class="button-grid">
                <button id="fix-button" disabled>Press 1 to fix hover</button>
                <button id="release-button" disabled>Press 2 to release hover</button>
                <button id="global-reset-button">Global Reset</button>
            </div>
</div>
            <script type="text/javascript">
                const metric = 'Depreciation_Schedules';
                const selected_versions = [1, 2];
                const metrics_data = {"Annual_Cash_Flows": [[0, 13350, 13644, 13959, 14286, 14820, 14955, 15264, 15681, 16029, 16230, 16262, 16262, 16298, 16581, 16860, 17058, 17151, 17516, 18589, 13963], [0, 8869, 9064, 9272, 9491, 9845, 9935, 10140, 10417, 10648, 10782, 10803, 10803, 10826, 11015, 11200, 11332, 11394, 11636, 12532, 9275]], "Annual_Revenues": [[0, 13351, 13644, 13959, 14287, 14821, 14956, 15265, 15681, 16029, 16231, 16262, 16262, 16298, 16582, 16861, 17058, 17152, 17516, 18869, 18869], [0, 19069, 19488, 19936, 20406, 21168, 21361, 21802, 22397, 22894, 23182, 23227, 23227, 23277, 23683, 24081, 24364, 24498, 25018, 26949, 26949]], "Annual_Operating_Expenses": [[-300000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [-200000, 10200, 10424, 10664, 10915, 11323, 11426, 11662, 11980, 12246, 12400, 12424, 12424, 12451, 12668, 12881, 13032, 13104, 13382, 14415, 14415]], "Loan_Repayment_Terms": [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]], "Depreciation_Schedules": [[0, 13350, 13644, 13959, 14286, 14820, 14955, 15264, 15681, 16029, 16230, 16262, 16262, 16298, 16581, 16860, 17058, 17151, 17516, 17794, 0], [0, 8869, 9064, 9272, 9491, 9845, 9935, 10140, 10417, 10648, 10782, 10803, 10803, 10826, 11015, 11200, 11332, 11394, 11636, 12528, 0]], "State_Taxes": [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 53, 943], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 626]], "Federal_Taxes": [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 225, 3962], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2632]], "Cumulative_Cash_Flows": [[-300000, -287285, -274290, -260996, -247390, -233275, -219031, -204493, -189559, -174293, -158835, -143348, -127860, -112338, -96546, -80488, -64242, -47907, -31226, -13521, -223], [-200000, -191553, -182920, -174090, -165051, -155675, -146213, -136556, -126635, -116494, -106225, -95937, -85648, -75338, -64847, -54180, -43388, -32537, -21455, -9519, -686]]};
                const hover_texts = {"Annual_Cash_Flows": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]], "active": [false, false]}, "Annual_Revenues": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]], "active": [false, false]}, "Annual_Operating_Expenses": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]], "active": [false, false]}, "Loan_Repayment_Terms": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]], "active": [false, false]}, "Depreciation_Schedules": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]], "active": [false, false]}, "State_Taxes": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]], "active": [false, false]}, "Federal_Taxes": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]], "active": [false, false]}, "Cumulative_Cash_Flows": {"data": [["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""]], "active": [false, false]}};
                const traces_names = ["Depreciation Schedules - ", "Depreciation Schedules - "];
                const version_colors = ["#ff0000", "#0000ff", "#ff6e31", "#00a600", "#12c9ca", "#8b00ff", "#9400D3", "#f215a5", "#ff1493"];
                let annotations = [];
                let hoverTextStatus = {};
                let currentHoverPoint = null;
                let traces = [];

                const marker_styles = [
                    { symbol: "circle", size: 6 },
                    { symbol: "square", size: 6 },
                    { symbol: "diamond", size: 6 },
                    { symbol: "cross", size: 6 },
                    { symbol: "triangle-up", size: 6 },
                    { symbol: "triangle-down", size: 6 },
                    { symbol: "pentagon", size: 6 },
                    { symbol: "hexagon", size: 6 }
                ];

                for (let vIdx = 0; vIdx < selected_versions.length; vIdx++) {
                    const version = selected_versions[vIdx];
                    traces.push({
                        x: Array.from({ length: metrics_data[metric][vIdx].length }, (_, i) => i + 1),
                        y: metrics_data[metric][vIdx],
                        type: 'scatter',
                        mode: 'lines+markers',
                        name: traces_names[vIdx],
                        text: hover_texts[metric]['data'][vIdx],
                        hoverinfo: 'text',
                        marker: { ...marker_styles[vIdx % marker_styles.length], color: version_colors[vIdx % version_colors.length] }
                    });
                }

                const layout = {
                    grid: { rows: 1, columns: 1, pattern: 'independent' },
                    hovermode: 'closest',
                    title: `Depreciation Schedules`,
                    annotations: [],
                };

                Plotly.newPlot('plot', traces, layout);

                document.getElementById('fix-button').disabled = false;
                document.getElementById('release-button').disabled = false;

                document.getElementById('plot').on('plotly_hover', function(eventData) {
                    currentHoverPoint = eventData.points[0];
                });

                function toggleHoverText(fix) {
                    if (currentHoverPoint !== null) {
                        const pointKey = `${currentHoverPoint.curveNumber}-${currentHoverPoint.pointIndex}`;
                        const color = version_colors[currentHoverPoint.curveNumber % version_colors.length];  // Get color for version

                        if (fix) {
                            hoverTextStatus[pointKey] = true;
                            const hoverAnnotation = {
                                x: currentHoverPoint.x,
                                y: currentHoverPoint.y,
                                text: `<span style="color:${color};">${currentHoverPoint.text}</span>`,  // Apply color to text
                                showarrow: true,
                                arrowhead: 5,
                                ax: 0,
                                ay: -70,
                                axref: 'pixel',
                                ayref: 'pixel'
                            };
                            annotations.push(hoverAnnotation);
                            Plotly.relayout('plot', { annotations });
                        } else {
                            hoverTextStatus[pointKey] = false;
                            annotations = annotations.filter(ann => ann.x !== currentHoverPoint.x || ann.y !== currentHoverPoint.y);
                            Plotly.relayout('plot', { annotations });
                        }
                    }
                }

                document.addEventListener('keydown', (event) => {
                    if (event.key === '1') {
                        toggleHoverText(true);
                    } else if (event.key === '2') {
                        toggleHoverText(false);
                    }
                });

                function globalReset() {
                    hoverTextStatus = {};
                    annotations = [];
                    Plotly.relayout('plot', { annotations: [] });
                }

                document.getElementById('global-reset-button').addEventListener('click', globalReset);
            </script>
        </body>
        </html>
        